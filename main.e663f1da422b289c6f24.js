!function(){"use strict";var e={126:function(e,t,n){n.r(t)},907:function(e,t,n){n.r(t)},622:function(e,t,n){n.r(t)},216:function(e,t,n){n.r(t)},242:function(e,t,n){n.r(t)},856:function(e,t,n){n.r(t)},131:function(e,t,n){n.r(t)},12:function(e,t,n){n.r(t)},779:function(e,t,n){n.r(t)},307:function(e,t,n){n.r(t)},752:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function l(e){try{o(i.next(e))}catch(e){a(e)}}function r(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,r)}o((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(307);const a=s(n(805)),l=s(n(977)),r=s(n(638)),o=s(n(541)),d=s(n(122)),c=s(n(583)),h=s(n(94)),u=s(n(487)),m=s(n(471)),p=s(n(239));t.default=class{constructor(e){this.rootElement=e,this.baseWrapper=new c.default("div",["wrapper"]),this.header=new c.default("header",["header"]),this.main=new c.default("main",["main"]),this.footer=new c.default("footer",["footer"]),this.headerWrapper=new c.default("div",["header__wrapper"]),this.headerHiding=new c.default("h1",["header__heading"]),this.headerContent=new c.default("div",["header__content"]),this.headerMenu=new c.default("ul",["header__list"]),this.headerButtons=new c.default("div",["buttons__list"]),this.headerItemAbout=new h.default(["header__item","about","active"],"About Game","about"),this.headerItemScore=new h.default(["header__item","score"],"Best Score","score"),this.headerItemSettings=new h.default(["header__item","settings"],"Game Settings","settings"),this.registryBtn=new c.default("button",["header__button","register"]),this.startBtn=new c.default("button",["header__button","start","none"]),this.stopBtn=new c.default("button",["header__button","stop","none"]),this.headerUserIcon=new c.default("img",["header__icon","none"]),this.gamePage=new a.default,this.aboutPage=new o.default,this.scorePage=new d.default,this.settingsPage=new l.default,this.settings=new r.default("type"),this.registrationPage=new u.default,this.newUser=[],this.rootElement.appendChild(this.baseWrapper.element),this.addHeaderBlock(),this.addMainBlock(),this.addFooterBlock(),this.clickRegistryBtn(),this.activateHeaderItem(),this.listenFinish()}addHeaderBlock(){this.registryBtn.element.innerText="Register new player",this.startBtn.element.innerText="Start Game",this.stopBtn.element.innerText="Stop Game",this.headerHiding.element.innerText="Match-Match Game",this.headerContent.element.insertAdjacentHTML("afterbegin","\n      <div class='logo'>\n        <div class='logo__item'>Match</div>\n        <div class='logo__item logo-white'>Match</div>\n      </div>\n    "),this.baseWrapper.element.appendChild(this.header.element),this.header.element.appendChild(this.headerWrapper.element),this.headerWrapper.element.appendChild(this.headerHiding.element),this.headerWrapper.element.appendChild(this.headerContent.element),this.headerContent.element.appendChild(this.headerMenu.element),this.headerContent.element.appendChild(this.headerButtons.element),this.headerMenu.element.appendChild(this.headerItemAbout.element),this.headerMenu.element.appendChild(this.headerItemScore.element),this.headerMenu.element.appendChild(this.headerItemSettings.element),this.headerButtons.element.appendChild(this.registryBtn.element),this.headerButtons.element.appendChild(this.startBtn.element),this.headerButtons.element.appendChild(this.stopBtn.element),this.headerButtons.element.appendChild(this.headerUserIcon.element)}addMainBlock(){this.baseWrapper.element.appendChild(this.main.element),this.main.element.appendChild(this.gamePage.element),this.main.element.appendChild(this.aboutPage.element),this.main.element.appendChild(this.scorePage.element),this.main.element.appendChild(this.settingsPage.element),this.main.element.appendChild(this.registrationPage.element)}addFooterBlock(){this.footer.element.innerHTML="\n      <div class='footer__wrapper'>\n        <div class='footer__content'>\n          <nav class='footer__nav'>\n            <ul class='footer__list'>\n              <li class='footer__item'>\n                <a class='footer__link' href='https://docs.rs.school/' target='blank'>© Rolling Scopes School\n                </a>\n              </li>\n              <li class='footer__item'>\n                <a class='footer__link' href='https://github.com/Balzamova' target='blank'>\n                  © Anastasiia Balzamova\n                </a>\n              </li>\n            </ul>\n          </nav>\n        </div>\n      </div>\n    ",this.baseWrapper.element.appendChild(this.footer.element)}openPageAbout(){this.closeAllPages(),this.aboutPage.element.classList.remove("none")}openPageScore(){this.closeAllPages(),this.scorePage.element.classList.remove("none")}openPageSettings(){this.closeAllPages(),this.settingsPage.element.classList.remove("none")}closeAllPages(){this.gamePage.element.classList.add("none"),this.aboutPage.element.classList.add("none"),this.scorePage.element.classList.add("none"),this.settingsPage.element.classList.add("none"),this.registrationPage.element.classList.add("none"),this.registrationPage.clearInputs()}removeActiveItemState(){const e=document.querySelectorAll(".header__item");for(let t=0;t<e.length;t++)null==e||e.forEach((e=>{null==e||e.classList.remove("active")}))}activateHeaderItem(){const e=document.querySelectorAll(".header__item");null==e||e.forEach((e=>{null==e||e.addEventListener("click",(t=>{this.removeActiveItemState(),this.closeAllPages(),this.gamePage.stopGame();const n=t.target;n.classList.contains("about")?(e.classList.add("active"),this.openPageAbout()):n.classList.contains("score")?(e.classList.add("active"),this.openPageScore()):n.classList.contains("settings")&&(e.classList.add("active"),this.openPageSettings())}))}))}clickRegistryBtn(){this.registryBtn.element.addEventListener("click",(()=>{this.closeAllPages(),this.removeActiveItemState(),this.registrationPage.element.classList.remove("none"),this.closeRegistryForm(),this.submitRegistryForm()}))}submitRegistryForm(){const e=document.querySelector(".modal__register_btn.submit"),t=document.querySelector(".header__item.about");null==e||e.addEventListener("click",(n=>{const i=document.querySelector("#name"),s=document.querySelector("#surname"),a=document.querySelector("#email"),l=document.querySelector("#loaded__img");let r="";r=l?l.src:p.default,n.preventDefault(),(null==e?void 0:e.classList.contains("active"))&&(this.newUser=[i.value,s.value,a.value,r],this.removeActiveItemState(),this.openPageAbout(),this.headerUserIcon.element.style.backgroundImage=`url(${r})`,null==t||t.classList.add("active"),this.registryBtn.element.classList.add("none"),this.startBtn.element.classList.remove("none"),this.headerUserIcon.element.classList.remove("none"),this.registrationPage.clearInputs(),this.clickStartGameBtn())}))}closeRegistryForm(){const e=document.querySelector(".modal__register_btn.cancel"),t=document.querySelector(".header__item.about");null==e||e.addEventListener("click",(()=>{this.removeActiveItemState(),this.openPageAbout(),null==t||t.classList.add("active")}))}clickStartGameBtn(){this.startBtn.element.addEventListener("click",(()=>{this.closeAllPages(),this.removeActiveItemState(),this.gamePage.element.classList.remove("none"),this.startBtn.element.classList.add("none"),this.stopBtn.element.classList.remove("none"),this.getTypeLevel()}))}clickStopGameBtn(){this.stopBtn.element.addEventListener("click",(()=>{const e=document.querySelector(".header__item.about");this.stopBtn.element.classList.add("none"),this.headerUserIcon.element.classList.add("none"),this.registryBtn.element.classList.remove("none"),this.gamePage.stopGame(),this.clickRegistryBtn(),this.removeActiveItemState(),this.openPageAbout(),null==e||e.classList.add("active")}))}listenFinish(){document.addEventListener("my-event",(()=>{this.closeFinishModal(),this.removeActiveItemState(),this.openPageScore(),this.checkScoreResults(),document.querySelector(".header__item.score").classList.add("active")}),!1)}closeFinishModal(){var e,t;const n=document.querySelector(".modal__finish"),i=document.querySelector(".wrapper__modal"),s=document.querySelector(".header__button.stop"),a=document.querySelector(".header__icon"),l=document.querySelector(".header__button.register");n&&i&&(null===(e=n.parentNode)||void 0===e||e.removeChild(n),null===(t=i.parentNode)||void 0===t||t.removeChild(i),document.body.classList.remove("lock")),a.style.backgroundImage=`url(${p.default})`,s.classList.add("none"),a.classList.add("none"),l.classList.remove("none")}checkScoreResults(){const e=this.newUser.concat(this.gamePage.score);(new m.default).addUserToDataBase(e)}getTypeLevel(){const e=this.settings.checkType(),t=this.settings.checkLevel();this.startGame(e,t)}startGame(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch("./images.json"),i=(yield n.json())[0].images.map((t=>`images/${e}/${t}`)).slice(0,t);this.gamePage.newGame(i,t),this.clickStopGameBtn()}))}}},567:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(583));class a extends s.default{constructor(e,t,n){super("li",["about-page__item"]),this.item=`\n          <div class="about-page__item-first">\n            <div class="about-page__item-number"> ${e} </div>\n            <div class="about-page__item-info"> ${t} </div>\n          </div>\n            <div class="about-page__item-second ${n}">\n              <img src="./${n}-image.png" alt="${n}" class="about-page__item-img ${n}">\n            </div>\n    `,this.element.insertAdjacentHTML("beforeend",this.item)}}t.default=a},541:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(126);const s=i(n(583)),a=i(n(567));class l extends s.default{constructor(){super("div",["about-page__container","none"]),this.list=new s.default("ul",["about-page__list"]),this.registerTitle="Register new player in game",this.settingsTitle="Configure your game settings",this.gameTitle="Start you new game! Remember card positions and match it before times up.",this.register=new a.default("1",this.registerTitle,"register"),this.settings=new a.default("2",this.settingsTitle,"settings"),this.game=new a.default("3",this.gameTitle,"view"),this.element.appendChild(this.list.element),this.list.element.appendChild(this.register.element),this.list.element.appendChild(this.settings.element),this.list.element.appendChild(this.game.element)}}t.default=l},94:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(907);const s=i(n(583));class a extends s.default{constructor(e,t,n){super("ul",["header__list"]),this.item=new s.default("li",[...e]),this.item.element.insertAdjacentHTML("afterbegin",`\n      <div class='header__link ${n}'>\n\t\t\t\t<img class='header__link_icon ${n}' />\n\t\t\t\t${t}\n\t\t\t</div>\n    `),this.element.appendChild(this.item.element)}}t.default=a},583:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},783:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(583));n(622);const a=i(n(104));class l extends s.default{constructor(e){super("div",["game__card-container"]),this.image=e,this.cardState=new s.default("div",["game__card-state"]),this.isFlipped=!1,this.element.innerHTML=`\n      <div class='game__card'>\n        <img class='game__card_img back' src='${a.default}'/>\n        <img class='game__card_img front' src='${e}'/>\n      </div>\n    `,this.element.appendChild(this.cardState.element)}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}showErrorState(){this.cardState.element.classList.toggle("error")}showCompleteState(){this.cardState.element.classList.add("complete")}}t.default=l},682:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=t.SHOW_TIME=void 0,n(216);const s=i(n(583));t.SHOW_TIME=30;class a extends s.default{constructor(){super("div",["game__block"]),this.cards=[]}clear(){this.cards=[],this.element.innerHTML=""}setCardsWidth(e,t){var n;const i=null===(n=this.element)||void 0===n?void 0:n.offsetWidth,s=Math.sqrt(2*t),a=Math.floor((i-10*(s-1))/s);e.forEach((e=>{e.element.style.width=`${a}px`,e.element.style.height=`${a}px`})),this.addCards(e)}addCards(e){this.cards=e,this.cards.forEach((e=>this.element.appendChild(e.element))),setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),1e3*t.SHOW_TIME)}}t.CardsField=a},805:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function l(e){try{o(i.next(e))}catch(e){a(e)}}function r(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,r)}o((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(242);const a=s(n(680)),l=s(n(583)),r=s(n(783)),o=n(682);class d extends l.default{constructor(){super("div",["game-page__container","none"]),this.cardsField=new o.CardsField,this.clock=new l.default("div",["game-page__clock"]),this.isAnimation=!1,this.countOfFlipping=0,this.coupleCompleted=0,this.score="",this.element.appendChild(this.cardsField.element),this.element.prepend(this.clock.element)}newGame(e,t){this.cardsField.clear(),this.startTimer(),this.startwatch(),this.coupleCompleted=0,this.countOfFlipping=0;const n=e.concat(e).map((e=>new r.default(e))).sort((()=>Math.random()-.5));n.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.cardsField.setCardsWidth(n,t)}cardHandler(e){return i(this,void 0,void 0,(function*(){if(!this.isAnimation&&e.isFlipped){if(this.isAnimation=!0,this.countOfFlipping++,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!==e.image?(this.activeCard.showErrorState(),e.showErrorState(),yield a.default(2e3),this.activeCard.showErrorState(),e.showErrorState(),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()])):(this.coupleCompleted++,this.activeCard.showCompleteState(),e.showCompleteState(),this.isGameFinished()),this.activeCard=void 0,this.isAnimation=!1}}))}startTimer(){let e=o.SHOW_TIME;this.timer&&clearInterval(this.timer),this.timer=setInterval((()=>{let t=(e--).toString();e<10&&(t=`0${e}`),0===e&&(this.timer&&clearInterval(this.timer),e=30,this.startwatch()),this.clock.element.innerHTML=`00:${t}`}),1e3)}startwatch(){const e=this.cardsField.element.children.length;let t=0;this.timeout&&clearTimeout(this.timeout),this.watch&&clearInterval(this.watch),this.timeout=setTimeout((()=>{this.watch=setInterval((()=>{const n=++t;let i,s,a=0,l=0;t<60?l=n:(a++,l=n%60),i=l<10?`0${l}`:l.toString(),s=a<10?`0${a}`:a.toString(),this.clock.element.innerHTML=`${s}:${i}`,e/2===this.coupleCompleted&&this.watch&&clearInterval(this.watch)}),1e3)}),o.SHOW_TIME)}isGameFinished(){this.cardsField.element.children.length/2===this.coupleCompleted&&this.checkResultScore()}checkResultScore(){const e=this.clock.element.innerText,t=100*(this.cardsField.element.children.length-this.countOfFlipping/2),n=e.split(":"),i=t-10*(60*+n[0]+ +n[1]);i>0&&(this.score+=i),this.openFinishModal(e)}openFinishModal(e){const t=new l.default("div",["wrapper__modal"]),n=new l.default("div",["modal__finish"]),i=new l.default("div",["modal__finish_info"]),s=new l.default("button",["modal__finish_btn","finish"]);s.element.innerText="ok",i.element.innerText=`Congratulations! You successfully found all matches on ${e} minutes.`,document.body.classList.add("lock"),document.body.appendChild(n.element),document.body.appendChild(t.element),n.element.appendChild(i.element),n.element.appendChild(s.element);const a=new Event("my-event",{bubbles:!0});s.element.addEventListener("click",(()=>{s.element.dispatchEvent(a)}))}stopGame(){this.cardsField.clear(),this.timer&&clearInterval(this.timer),this.timeout&&clearTimeout(this.timeout),this.watch&&clearInterval(this.watch),this.clock.element.innerHTML=""}}t.default=d},487:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(583)),a=i(n(668));n(856);const l=i(n(921));class r extends s.default{constructor(){super("div",["modal__register"]),this.form=new s.default("form",["modal__register_form"]),this.user=new s.default("div",["form__user"]),this.info=new s.default("div",["form__info"]),this.submit=new s.default("button",["modal__register_btn","submit"]),this.cancel=new s.default("button",["modal__register_btn","cancel"]),this.name=new a.default("name","input","text","First Name"),this.surname=new a.default("surname","input","text","Last Name"),this.email=new a.default("email","input","email","E-mail"),this.download=new a.default("download","download","file",""),this.addComponentsToForm(),this.listen(),this.cancelWindow(),this.preventDefaultForm()}addComponentsToForm(){this.element.insertAdjacentHTML("afterbegin","\n      <div class='main-page__title'> Register new Player </div>\n    "),this.submit.element.innerText="add",this.cancel.element.innerText="cancel",this.download.element.classList.add("download"),this.download.element.children[0].classList.add("download"),this.element.appendChild(this.form.element),this.element.appendChild(this.cancel.element),this.form.element.appendChild(this.user.element),this.form.element.appendChild(this.submit.element),this.user.element.appendChild(this.info.element),this.user.element.appendChild(this.download.element),this.info.element.appendChild(this.name.element),this.info.element.appendChild(this.surname.element),this.info.element.appendChild(this.email.element)}listen(){this.name.element.addEventListener("input",(e=>{this.validateInputs(e)})),this.surname.element.addEventListener("input",(e=>{this.validateInputs(e)})),this.email.element.addEventListener("input",(e=>{this.validateInputs(e)})),this.download.element.addEventListener("change",(e=>{this.loadImage(e)}))}preventDefaultForm(){this.form.element.addEventListener("submit",(e=>{e.preventDefault()}))}loadImage(e){const t=document.querySelector(".form__label.download"),n=new FileReader,i=e.target;n.onloadend=function(){const e=n.result;t.src=e;const i=new Image;i.src=e,i.id="loaded__img",t.innerHTML="",t.append(i)},(null==i?void 0:i.files)&&i.files[0]?(n.readAsDataURL(i.files[0]),t.style.backgroundImage="none"):t.src=""}checkSubmitValidState(){const e=document.querySelector("#name"),t=document.querySelector("#surname"),n=document.querySelector("#email"),i=e.parentElement,s=t.parentElement,a=n.parentElement;(null==i?void 0:i.classList.contains("completed"))&&(null==s?void 0:s.classList.contains("completed"))&&(null==a?void 0:a.classList.contains("completed"))?this.submit.element.classList.add("active"):this.submit.element.classList.remove("active")}validateInputs(e){var t,n,i,s,a;const l=document.querySelector("#email"),r=e.target;if("name"===r.id||"surname"===r.id)return(null===(t=r.value)||void 0===t?void 0:t.match(/^(\p{L})+([(\p{L})[\d])*$/iu))?void(null===(n=r.parentElement)||void 0===n||n.classList.add("completed")):void(null===(i=r.parentElement)||void 0===i||i.classList.remove("completed"));l.validity.valid?null===(s=r.parentElement)||void 0===s||s.classList.add("completed"):null===(a=r.parentElement)||void 0===a||a.classList.remove("completed"),this.checkSubmitValidState()}clearInputs(){const e=document.querySelector("#name"),t=document.querySelector("#surname"),n=document.querySelector("#email"),i=document.querySelector(".form__label.download"),s=document.querySelector("#loaded__img"),a=e.parentElement,r=t.parentElement,o=n.parentElement;null==a||a.classList.remove("completed"),null==r||r.classList.remove("completed"),null==o||o.classList.remove("completed"),e.value="",t.value="",n.value="",s&&(i.style.backgroundImage=`url(${l.default})`,i.removeChild(s)),this.submit.element.classList.remove("active")}cancelWindow(){this.cancel.element.addEventListener("click",(()=>{this.clearInputs()}))}}t.default=r},668:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(583));n(131);class a extends s.default{constructor(e,t,n,i){super("fieldset",["form__block"]),this.element.innerHTML=`\n      <label class='form__label' for='${e}'>${i}</label>\n        <input class='form__${t}' id='${e}' type='${n}' required maxlength='30'>\n    `}}t.default=a},701:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,n,i,s){this.name=e,this.surname=t,this.email=n,this.icon=i,this.score=s}}},122:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(12);const s=i(n(583));class a extends s.default{constructor(){super("div",["score-page__container"]),this.element.insertAdjacentHTML("afterbegin","\n      <div class='score-page__title'> Best players </div>\n    ")}updateScorePage(e){const t=document.querySelector(".score-page__container"),n=document.querySelector(".score__list");n?(t.removeChild(n),t.appendChild(e)):t.appendChild(e)}}t.default=a},634:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(583)),a=i(n(239));class l extends s.default{constructor(e,t,n,i,s){super("li",["score__item"]),this.addElement(e,t,n,i,s)}addElement(e,t,n,i,s){i||(i=a.default);const l=`\n      <div class='score__item-first'>\n        <img class='score__item-img' src='${i}' alt='photo'>\n        <div class='score__item-info'>\n          <div class='score__item-name'> ${e} ${t} </div>\n          <div class='score__item-email'> ${n} </div>\n        </div>\n      </div>\n      <div class='score__item-second'>\n        <div class='score__item-title'> Score: </div>\n        <div class='score__item-score'> ${s} </div>\n      </div>\n    `;this.element.insertAdjacentHTML("beforeend",l)}}t.default=l},327:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(583)),a=i(n(122)),l=i(n(634));class r extends s.default{constructor(){super("ul",["score__list"])}addWinner(e){e.forEach((e=>{const t=new l.default(e.name,e.surname,e.email,e.icon,e.score);this.element.appendChild(t.element)})),(new a.default).updateScorePage(this.element)}}t.default=r},638:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(779);const s=i(n(583)),a=n(520);class l extends s.default{constructor(e){super("div",["settings-block"]),this.title=new s.default("div",["settings-page__title"]),this.animals=new s.default("li",["settings__item","type","checked"]),this.birds=new s.default("li",["settings__item","type"]),this.light=new s.default("li",["settings__item","level","checked"]),this.medium=new s.default("li",["settings__item","level"]),this.hight=new s.default("li",["settings__item","level"]),this.element.classList.add(e),this.selector=new s.default("div",["settings__selector",`${e}`]),this.label=new s.default("div",["settings__label",`${e}`]),this.list=new s.default("ul",["settings__list","none",`${e}`]),this.name=new s.default("div",["settings__name",`${e}`]),this.arrow=new s.default("div",["settings__arrow",`${e}`]),this.addComponents(e)}addComponents(e){this.element.prepend(this.title.element),this.element.appendChild(this.selector.element),this.selector.element.prepend(this.label.element),this.selector.element.appendChild(this.list.element),this.label.element.prepend(this.name.element),this.label.element.appendChild(this.arrow.element),this.animals.element.innerText=a.cardType.animals,this.birds.element.innerText=a.cardType.birds,this.light.element.innerText=a.cardDifficult.light,this.medium.element.innerText=a.cardDifficult.medium,this.hight.element.innerText=a.cardDifficult.hight,e===a.types[0].type&&(this.title.element.innerText=a.types[0].title,this.name.element.innerText=a.types[0].inner,this.list.element.appendChild(this.animals.element),this.list.element.appendChild(this.birds.element)),e===a.types[1].level&&(this.title.element.innerText=a.types[1].title,this.name.element.innerText=a.types[1].inner,this.list.element.appendChild(this.light.element),this.list.element.appendChild(this.medium.element),this.list.element.appendChild(this.hight.element)),this.label.element.addEventListener("click",(()=>{this.openList()})),this.list.element.addEventListener("click",(e=>{this.checkItem(e)}))}openList(){this.list.element.classList.toggle("none"),this.arrow.element.classList.toggle("open")}checkItem(e){const t=e.target,n=t.className.split(" ").join(".");document.querySelectorAll(`.${n}`).forEach((e=>{e.classList.remove("checked"),t.classList.add("checked")}))}checkType(){const e=document.querySelectorAll(".settings__item.type");let t="";return e.forEach((e=>e.className.includes("checked")?(t=e.innerHTML.toLowerCase(),t):null)),t}checkLevel(){const e=document.querySelectorAll(".settings__item.level");let t,n="";return e.forEach((e=>{e.className.includes("checked")&&(n=e.innerHTML)})),"4 * 4"===n?(t=8,t):"6 * 6"===n?(t=18,t):(t=32,t)}}t.default=l},977:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(779);const s=i(n(583)),a=i(n(638));class l extends s.default{constructor(){super("div",["settings-page__container","none"]),this.blockType=new a.default("type"),this.blockDiff=new a.default("level"),this.element.appendChild(this.blockType.element),this.element.appendChild(this.blockDiff.element)}}t.default=l},471:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(327)),a=i(n(701));class l{addUserToDataBase(e){const t=indexedDB.open("Balzamova",2),[n,i,s,a,l]=e;let r;t.onsuccess=function(){if(r=t.result,!r)return;const e=r.transaction("players","readwrite").objectStore("players"),o={name:n,surname:i,email:s,icon:a,score:l};e.put(o)},this.readDB()}readDB(){const e=indexedDB.open("Balzamova");let t;e.onupgradeneeded=function(){t=e.result,t.createObjectStore("players",{keyPath:"email"}).createIndex("by_email","email",{unique:!0})},e.onsuccess=function(e){t=e.target.result;const n=t.transaction("players").objectStore("players"),i=[];n.openCursor().onsuccess=function(e){const t=e.target.result;if(t){const e=new a.default(t.value.name,t.value.surname,t.value.email,t.value.icon,t.value.score);i.push(e),t.continue()}else(new l).sortByScore(i)}}}removeUserFromDB(e){const t=indexedDB.open("Balzamova");let n;t.onsuccess=function(){n=t.result,n.transaction(["players"],"readwrite").objectStore("players").delete(e.email)}}sortByScore(e){e.sort(((e,t)=>{const n=+e.score;return+t.score-n})),this.checkArrayLength(e)}checkArrayLength(e){if(e.length>10){const t=e[e.length-1];this.removeUserFromDB(t);const n=e.splice(0,10);this.addToWinnerList(n)}else this.addToWinnerList(e)}addToWinnerList(e){(new s.default).addWinner(e)}}t.default=l},607:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function l(e){try{o(i.next(e))}catch(e){a(e)}}function r(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,r)}o((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(307);const a=s(n(752)),l=s(n(471));window.onload=()=>i(void 0,void 0,void 0,(function*(){const e=document.querySelector("body");if(!e)throw Error("App element not found");yield(new l.default).readDB(),yield new a.default(e).openPageAbout()}))},520:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.types=t.cardDifficult=t.cardType=void 0,t.cardType={animals:"Animals",birds:"Birds"},t.cardDifficult={light:"4 * 4",medium:"6 * 6",hight:"8 * 8"},t.types=[{type:"type",title:"Game cards",inner:"select game cards type"},{level:"level",title:"Level",inner:"select game type"}]},680:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise((t=>{setTimeout(t,e)}))}},104:function(e,t,n){e.exports=n.p+"assets/a0101a1f833c4711ce49.png"},921:function(e,t,n){e.exports=n.p+"assets/729487788ca2e75c2140.svg"},239:function(e,t,n){e.exports=n.p+"assets/5fdcfa39728467149e6e.svg"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),n(607)}();